# Подключение джойстика KY-023 к STM32F401

## Изменения в проекте

Проект был модифицирован для использования джойстика KY-023 вместо отдельных кнопок.

## Подключение джойстика

### Пины джойстика KY-023:
- **VCC** → 3.3V или 5V (в зависимости от вашей платы)
- **GND** → GND
- **VRx** (X-ось) → **PA0** (ADC1_IN0)
- **VRy** (Y-ось) → **PA1** (ADC1_IN1)
- **SW** (кнопка) → **PA6** (GPIO Input с подтяжкой вверх)

### Дополнительные кнопки:
- **START** → **PA8** (опционально, можно использовать кнопку джойстика)
- **FIRE** → теперь использует кнопку джойстика (PA6)

## Настройка порогов

В файле `main.c` определены пороги для определения направления:

```c
#define JOYSTICK_CENTER_MIN 1500
#define JOYSTICK_CENTER_MAX 2600
#define JOYSTICK_THRESHOLD 800
```

Эти значения можно настроить под ваш конкретный джойстик:
- Если джойстик слишком чувствительный - увеличьте `JOYSTICK_THRESHOLD`
- Если центр не совпадает - отрегулируйте `JOYSTICK_CENTER_MIN` и `JOYSTICK_CENTER_MAX`

## Как это работает

1. ADC читает аналоговые значения с осей X и Y (0-4095 для 12-bit ADC)
2. Центральное положение джойстика обычно около 2048
3. При отклонении джойстика за пороговые значения определяется направление
4. Кнопка джойстика используется как FIRE

## Примечания

- Старые пины кнопок (PA10, PA11, PA12, PA15) больше не используются
- PA8 (START) можно оставить для отдельной кнопки или использовать кнопку джойстика
- Для лучшей производительности можно использовать DMA для чтения ADC, но текущая реализация работает достаточно быстро


